# レギュレーション

## 禁止事項

以下の行為は禁止されています。違反した場合、減点、0点、または失格となる場合があります。

- **極端な最適化**: API 動作テストは通るが、実際の業務アプリケーションとして機能しなくなるような最適化は NG です。
  - 例: 無意味にデータを削除して高速化する、API 動作テストで求められる出力をベタ打ちするなど
- **初期データの欠損**: 顧客データを消して高速化することは禁止です。顧客データは API を通して引き続き利用可能でなければなりません。
- **UI の大幅な変更**: ユーザインターフェースが明らかに変わるような仕様変更は禁止です。
- **環境の制約事項の悪用**: 以下の「環境の制約事項」を利用して不当にスコアを上げる行為は禁止です。
- **他リソースの利用**: 提供された環境以外のリソースを利用して処理能力を上げることは禁止です。
  - 例: 個人 PC でリクエスト処理を代替するなど。
- **採点モジュールの改ざん**: 採点モジュールを改ざんしたり、不具合を悪用して不当にスコアを上げる行為は禁止です。
- **他チームの妨害**: 他チームの環境にログインしたり、コードを変更したり、DOS 攻撃を行うことは禁止です。
- **他チームとの結託**: 他チームの環境にログインする、リポジトリを見るなどのカンニング行為は禁止です。
- **主催者が不適切と判断した行為**: その他、主催者側が不適切と判断した行為は禁止です。

## 競技中及び競技環境に関する注意

- 競技環境の HDD 容量は潤沢ではありません。不要なリソースは削除してください。
- リポジトリのディレクトリ構成を変えないでください。スクリプトが動作しなくなる場合があります。
  - 個別のサービス（`backend` 配下など）の構成については自由に変更可能です。
- `/.da`領域は変更しないでください。動作しなくなる場合があります。また、中身の持ち出しも禁止です。
- OS をシャットダウンすると、SSH ログインができなくなります。復旧には時間がかかりますので注意してください。
- Azure 障害により競技環境が一時的に使用できなくなった場合でも、課題提出締め切りの延長はありません。
- OS を書き換えるなどして競技環境が破損し、環境再構築が必要になった場合も、課題提出締め切りの延長はありません。

## 環境の制約事項
競技主催者側の都合上、やむを得ず現実的なシナリオと乖離している箇所があります。これを利用しても業務アプリケーションの改善とは言い難いため、あらかじめ共有します。

- 商品画像に使用している画像ファイルは同じ内容を使い回しています。
  - HDD 容量制限のため、同じファイルが参照されることがありますが、同一商品の画像を除いて全て別の添付ファイルであるものとして扱ってください。
- API テストは、一部のテスト用のユーザ情報を利用して実施されます。
  - ユーザの識別はアクセス状況から容易にわかりますが、この情報を使って API テストだけ PASS する最適化はレギュレーション違反とします。

## レギュレーション・制限

### チューニングについて

- チューニング対象になるのは、`webapp` ディレクトリに配置してあるアプリケーションになります。
  - `frontend` 配下のコードはチューニングの対象外となります  
- 負荷試験のシナリオをローカルで変更したい場合などは、`benchmarker` 配下に実装します。ローカルの負荷試験を変更しても、実際の採点に用いられる負荷試験には影響しません。

### 業務背景によるレギュレーション
- ロボットが商品をピックアップできるかどうかは商品の重さにのみ依存するものとし、大きさなどは考慮しないものとします。
- 商品のピックアップ計画を計算する際、重さという制限の中で合計価格を最大化することのみを考え、オーダーの滞留時間などは考慮しないものとします。
- 商品は倉庫内に十分に存在するものとし、在庫切れは起きないものとします。
- 商品情報は追加されることはないものとします。

### アプリケーションに関するレギュレーション
- 全てのエンドポイントへは、セッショントークンによる認証が必要となります。
  - HTTP リクエストの `Authorization` ヘッダに、ログイン時に取得したセッショントークンを付与してください。
    - 例：`"Authorization": "xxxxxx"`
- ユーザの認証に用いられるパスワードは、セキュリティの観点からハッシュ化を行っています。
  - パスワードを平文（やそれに近い形）で、メモリ上に保存することは禁止とします。

### 制限事項・注意
- APIのエンドポイントやペイロード・レスポンスの型を変更してはいけません。
- 新しくテーブルを作成するのは構いませんが、既存のテーブルの構造を変更してはいけません。
- 画像のサイズは変えてはいけません。
- アプリケーション全体のリクエスト処理には、タイムアウト制御が適用されており、`/webapp/backend/internal/service/utils/timeout.go` にタイムアウト処理が実装されています。
- このタイムアウト時間は、パフォーマンスや要件に応じて自由に変更できます。また、必要に応じてタイムアウト処理自体を無効化することも可能です。

---

[トップ](../../README.md)
